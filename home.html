<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Loan & Goal Manager</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#0078D4',
                        'primary-dark': '#005ea2',
                        success: '#10B981',
                        warning: '#F59E0B',
                        danger: '#EF4444'
                    }
                }
            }
        }
    </script>
    <style>
        .progress-bar { transition: width 0.5s ease-in-out; }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .loan-card:hover { transform: translateY(-2px); transition: transform 0.2s; }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <h1 class="text-2xl font-bold text-gray-900">Personal Finance Manager</h1>
                <div class="flex items-center space-x-4">
                    <div class="hidden md:flex space-x-1">
                        <button class="nav-tab active" data-tab="dashboard">Dashboard</button>
                        <button class="nav-tab" data-tab="loans">My Loans</button>
                        <button class="nav-tab" data-tab="wishlist">Wishlist</button>
                        <button class="nav-tab" data-tab="health">Health Tips</button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Dashboard Tab -->
    <div id="dashboardTab" class="tab-content">
        <main class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
            <!-- Daily Motivation -->
            <div class="bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg shadow p-6 mb-8 text-white">
                <div class="flex items-center justify-between">
                    <div>
                        <h2 class="text-lg font-semibold mb-2">Daily Motivation</h2>
                        <p id="dailyQuote" class="text-sm opacity-90">"Every rupee saved today is a step towards your financial freedom tomorrow."</p>
                    </div>
                    <button id="newQuoteBtn" class="bg-white bg-opacity-20 hover:bg-opacity-30 px-4 py-2 rounded-md text-sm">
                        New Quote
                    </button>
                </div>
            </div>

            <!-- Summary Cards -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center">
                        <div class="flex-1">
                            <p class="text-sm font-medium text-gray-500">Total Debt</p>
                            <p id="totalDebt" class="text-2xl font-bold text-red-600">‚Çπ0</p>
                        </div>
                        <div class="ml-4 w-12 h-12 bg-red-100 rounded-full flex items-center justify-center">
                            <span class="text-red-600 text-xl">üí∏</span>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center">
                        <div class="flex-1">
                            <p class="text-sm font-medium text-gray-500">Monthly Payment</p>
                            <p id="totalMonthlyPayment" class="text-2xl font-bold text-blue-600">‚Çπ0</p>
                        </div>
                        <div class="ml-4 w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center">
                            <span class="text-blue-600 text-xl">üìÖ</span>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center">
                        <div class="flex-1">
                            <p class="text-sm font-medium text-gray-500">Savings Goal</p>
                            <p id="totalSavings" class="text-2xl font-bold text-green-600">‚Çπ0</p>
                        </div>
                        <div class="ml-4 w-12 h-12 bg-green-100 rounded-full flex items-center justify-center">
                            <span class="text-green-600 text-xl">üéØ</span>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center">
                        <div class="flex-1">
                            <p class="text-sm font-medium text-gray-500">Next Payment</p>
                            <p id="nextPayment" class="text-lg font-bold text-orange-600">-</p>
                        </div>
                        <div class="ml-4 w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center">
                            <span class="text-orange-600 text-xl">‚è∞</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <!-- Recent Payments -->
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold text-gray-900">Recent Payments</h3>
                        <button id="addPaymentBtn" class="bg-primary text-white px-4 py-2 rounded-md text-sm hover:bg-primary-dark">
                            Add Payment
                        </button>
                    </div>
                    <div id="recentPayments" class="space-y-3">
                        <p class="text-gray-500 text-center py-4">No payments recorded yet</p>
                    </div>
                </div>

                <!-- Upcoming Payments -->
                <div class="bg-white rounded-lg shadow p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Upcoming Payments</h3>
                    <div id="upcomingPayments" class="space-y-3">
                        <p class="text-gray-500 text-center py-4">No upcoming payments</p>
                    </div>
                </div>
            </div>

            <!-- Progress Overview -->
            <div class="bg-white rounded-lg shadow p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Loan Progress Overview</h3>
                <div id="progressOverview" class="space-y-4">
                    <p class="text-gray-500 text-center py-8">Add loans to see progress tracking</p>
                </div>
            </div>
        </main>
    </div>

    <!-- Loans Tab -->
    <div id="loansTab" class="tab-content hidden">
        <main class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-900">My Loans</h2>
                <button id="addLoanBtn" class="bg-primary text-white px-6 py-2 rounded-md hover:bg-primary-dark">
                    Add New Loan
                </button>
            </div>

            <!-- Loan Cards -->
            <div id="loanCards" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Loans will be displayed here -->
            </div>
        </main>
    </div>

    <!-- Wishlist Tab -->
    <div id="wishlistTab" class="tab-content hidden">
        <main class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-900">My Wishlist Goals</h2>
                <button id="addWishlistBtn" class="bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700">
                    Add New Goal
                </button>
            </div>

            <!-- Wishlist Cards -->
            <div id="wishlistCards" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Wishlist items will be displayed here -->
            </div>
        </main>
    </div>

    <!-- Health Tips Tab -->
    <div id="healthTab" class="tab-content hidden">
        <main class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">Health & Wellness Tips</h2>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Fruits Section -->
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center mb-4">
                        <span class="text-3xl mr-3">üçé</span>
                        <h3 class="text-lg font-semibold text-gray-900">Daily Fruits</h3>
                    </div>
                    <div class="space-y-3 text-sm text-gray-600">
                        <p><strong>Morning:</strong> 1 Apple or Banana with breakfast</p>
                        <p><strong>Afternoon:</strong> Orange or Seasonal fruits</p>
                        <p><strong>Evening:</strong> Pomegranate or Grapes</p>
                        <div class="mt-4 p-3 bg-green-50 rounded-md">
                            <p class="text-green-800 font-medium">Today's Tip:</p>
                            <p class="text-green-700">Eat fruits 30 minutes before meals for better digestion</p>
                        </div>
                    </div>
                </div>

                <!-- Water Intake Section -->
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center mb-4">
                        <span class="text-3xl mr-3">üíß</span>
                        <h3 class="text-lg font-semibold text-gray-900">Water Intake</h3>
                    </div>
                    <div class="space-y-3 text-sm text-gray-600">
                        <p><strong>Target:</strong> 8-10 glasses per day</p>
                        <p><strong>Morning:</strong> 2 glasses after waking up</p>
                        <p><strong>Before meals:</strong> 1 glass 30 min before</p>
                        <p><strong>Evening:</strong> Reduce intake 2 hours before sleep</p>
                        <div class="mt-4 p-3 bg-blue-50 rounded-md">
                            <p class="text-blue-800 font-medium">Hydration Tracker:</p>
                            <div class="flex space-x-1 mt-2">
                                <div class="w-4 h-4 bg-blue-500 rounded-full"></div>
                                <div class="w-4 h-4 bg-gray-200 rounded-full"></div>
                                <div class="w-4 h-4 bg-gray-200 rounded-full"></div>
                                <div class="w-4 h-4 bg-gray-200 rounded-full"></div>
                            </div>
                            <p class="text-blue-700 text-xs mt-1">1/8 glasses today</p>
                        </div>
                    </div>
                </div>

                <!-- Meditation Section -->
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center mb-4">
                        <span class="text-3xl mr-3">üßò‚Äç‚ôÇÔ∏è</span>
                        <h3 class="text-lg font-semibold text-gray-900">Meditation</h3>
                    </div>
                    <div class="space-y-3 text-sm text-gray-600">
                        <p><strong>Morning:</strong> 10 minutes breathing meditation</p>
                        <p><strong>Afternoon:</strong> 5 minutes mindfulness break</p>
                        <p><strong>Evening:</strong> 10 minutes gratitude meditation</p>
                        <div class="mt-4 p-3 bg-purple-50 rounded-md">
                            <p class="text-purple-800 font-medium">Today's Practice:</p>
                            <p class="text-purple-700">Focus on your breath. Inhale for 4 counts, hold for 4, exhale for 6</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Weekly Health Goals -->
            <div class="bg-white rounded-lg shadow p-6 mt-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Weekly Health Goals</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div class="p-4 border rounded-lg">
                        <h4 class="font-medium text-gray-900 mb-2">Exercise</h4>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-green-600 h-2 rounded-full" style="width: 60%"></div>
                        </div>
                        <p class="text-sm text-gray-600 mt-1">3/5 days this week</p>
                    </div>
                    
                    <div class="p-4 border rounded-lg">
                        <h4 class="font-medium text-gray-900 mb-2">Water Goal</h4>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-blue-600 h-2 rounded-full" style="width: 40%"></div>
                        </div>
                        <p class="text-sm text-gray-600 mt-1">28/70 glasses this week</p>
                    </div>
                    
                    <div class="p-4 border rounded-lg">
                        <h4 class="font-medium text-gray-900 mb-2">Meditation</h4>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-purple-600 h-2 rounded-full" style="width: 80%"></div>
                        </div>
                        <p class="text-sm text-gray-600 mt-1">4/5 sessions this week</p>
                    </div>
                    
                    <div class="p-4 border rounded-lg">
                        <h4 class="font-medium text-gray-900 mb-2">Fruits</h4>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-orange-600 h-2 rounded-full" style="width: 70%"></div>
                        </div>
                        <p class="text-sm text-gray-600 mt-1">15/21 servings this week</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Add Loan Modal -->
    <div id="loanModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">Add New Loan</h3>
            <div class="space-y-4">
                <div>
                    <label for="loanName" class="block text-sm font-medium text-gray-700 mb-2">Loan Name</label>
                    <input type="text" id="loanName" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary" placeholder="e.g., Home Loan, Bandhan Bank">
                </div>
                
                <div>
                    <label for="loanType" class="block text-sm font-medium text-gray-700 mb-2">Loan Type</label>
                    <select id="loanType" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary">
                        <option value="emi">Standard EMI Loan</option>
                        <option value="fixed">Fixed Total Amount</option>
                        <option value="interest_only">Interest Only</option>
                        <option value="personal">Personal/Flexible</option>
                    </select>
                </div>
                
                <div id="loanFields">
                    <!-- Dynamic fields based on loan type -->
                </div>
                
                <div>
                    <label for="paymentDate" class="block text-sm font-medium text-gray-700 mb-2">Monthly Payment Date</label>
                    <input type="number" id="paymentDate" value="1" min="1" max="31" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary">
                </div>
                
                <div class="flex items-center">
                    <input type="checkbox" id="autoPayment" class="mr-2">
                    <label for="autoPayment" class="text-sm text-gray-700">Enable automatic payment tracking</label>
                </div>
                
                <div class="flex space-x-3">
                    <button id="saveLoanBtn" class="flex-1 bg-primary text-white py-2 px-4 rounded-md hover:bg-primary-dark">Save Loan</button>
                    <button id="cancelLoanBtn" class="flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Wishlist Modal -->
    <div id="wishlistModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">Add Wishlist Goal</h3>
            <div class="space-y-4">
                <div>
                    <label for="goalName" class="block text-sm font-medium text-gray-700 mb-2">Goal Name</label>
                    <input type="text" id="goalName" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary" placeholder="e.g., New Bike, Laptop">
                </div>
                
                <div>
                    <label for="goalImage" class="block text-sm font-medium text-gray-700 mb-2">Image URL (optional)</label>
                    <input type="url" id="goalImage" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary" placeholder="https://example.com/image.jpg">
                </div>
                
                <div>
                    <label for="goalPrice" class="block text-sm font-medium text-gray-700 mb-2">Target Amount (‚Çπ)</label>
                    <input type="number" id="goalPrice" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary" placeholder="50000">
                </div>
                
                <div>
                    <label for="savingFreq" class="block text-sm font-medium text-gray-700 mb-2">Saving Frequency</label>
                    <select id="savingFreq" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary">
                        <option value="daily">Daily</option>
                        <option value="weekly">Weekly</option>
                        <option value="monthly">Monthly</option>
                    </select>
                </div>
                
                <div>
                    <label for="savingAmount" class="block text-sm font-medium text-gray-700 mb-2">Saving Amount (‚Çπ)</label>
                    <input type="number" id="savingAmount" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary" placeholder="1000">
                </div>
                
                <div class="flex space-x-3">
                    <button id="saveWishlistBtn" class="flex-1 bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700">Save Goal</button>
                    <button id="cancelWishlistBtn" class="flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Payment Modal -->
    <div id="paymentModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">Add Payment</h3>
            <div class="space-y-4">
                <div>
                    <label for="paymentLoan" class="block text-sm font-medium text-gray-700 mb-2">Select Loan/Goal</label>
                    <select id="paymentLoan" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary">
                        <option value="">Select...</option>
                    </select>
                </div>
                
                <div>
                    <label for="paymentAmount" class="block text-sm font-medium text-gray-700 mb-2">Amount (‚Çπ)</label>
                    <input type="number" id="paymentAmount" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary">
                </div>
                
                <div>
                    <label for="paymentDate2" class="block text-sm font-medium text-gray-700 mb-2">Payment Date</label>
                    <input type="date" id="paymentDate2" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary">
                </div>
                
                <div>
                    <label for="paymentNote" class="block text-sm font-medium text-gray-700 mb-2">Note (optional)</label>
                    <input type="text" id="paymentNote" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary" placeholder="Monthly EMI payment">
                </div>
                
                <div class="flex space-x-3">
                    <button id="savePaymentBtn" class="flex-1 bg-primary text-white py-2 px-4 rounded-md hover:bg-primary-dark">Save Payment</button>
                    <button id="cancelPaymentBtn" class="flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let loans = [];
        let wishlistItems = [];
        let payments = [];
        
        // Navigation CSS
        const style = document.createElement('style');
        style.textContent = `
            .nav-tab {
                padding: 8px 16px;
                border-radius: 6px;
                font-size: 14px;
                font-weight: 500;
                transition: all 0.2s;
                color: #6B7280;
            }
            .nav-tab:hover {
                background-color: #F3F4F6;
                color: #374151;
            }
            .nav-tab.active {
                background-color: #0078D4;
                color: white;
            }
        `;
        document.head.appendChild(style);

        // Motivational quotes
        const motivationalQuotes = [
            "Every rupee saved today is a step towards your financial freedom tomorrow.",
            "Small steps daily lead to big changes yearly - keep paying those loans!",
            "Your debt doesn't define you, but your discipline in paying it off will.",
            "Financial peace isn't the acquisition of stuff, it's learning to live on less.",
            "A budget is telling your money where to go instead of wondering where it went.",
            "The real measure of your wealth is how much you'd be worth if you lost all your money.",
            "Don't work for money, make money work for you - start with clearing your debts.",
            "Every payment you make is buying back your financial freedom.",
            "Debt is normal. Be weird - pay it off early!",
            "Your future self will thank you for every extra payment you make today."
        ];

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            initializeEventListeners();
            updateDailyQuote();
            updateDashboard();
            
            // Set default payment date to today
            document.getElementById('paymentDate2').valueAsDate = new Date();
        });

        // Tab Navigation
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                const tabName = tab.dataset.tab;
                switchTab(tabName);
            });
        });

        function switchTab(tabName) {
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');

            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });

            document.getElementById(`${tabName}Tab`).classList.remove('hidden');
        }

        // Event listeners
        function initializeEventListeners() {
            // Quote refresh
            document.getElementById('newQuoteBtn').addEventListener('click', updateDailyQuote);
            
            // Modal controls
            document.getElementById('addLoanBtn').addEventListener('click', showLoanModal);
            document.getElementById('cancelLoanBtn').addEventListener('click', hideLoanModal);
            document.getElementById('saveLoanBtn').addEventListener('click', saveLoan);
            
            document.getElementById('addWishlistBtn').addEventListener('click', showWishlistModal);
            document.getElementById('cancelWishlistBtn').addEventListener('click', hideWishlistModal);
            document.getElementById('saveWishlistBtn').addEventListener('click', saveWishlist);
            
            document.getElementById('addPaymentBtn').addEventListener('click', showPaymentModal);
            document.getElementById('cancelPaymentBtn').addEventListener('click', hidePaymentModal);
            document.getElementById('savePaymentBtn').addEventListener('click', savePayment);
            
            // Loan type change
            document.getElementById('loanType').addEventListener('change', updateLoanFields);
        }

        // Load data from localStorage
        function loadData() {
            loans = JSON.parse(localStorage.getItem('loans') || '[]');
            wishlistItems = JSON.parse(localStorage.getItem('wishlist') || '[]');
            payments = JSON.parse(localStorage.getItem('payments') || '[]');
        }

        // Save data to localStorage
        function saveData() {
            localStorage.setItem('loans', JSON.stringify(loans));
            localStorage.setItem('wishlist', JSON.stringify(wishlistItems));
            localStorage.setItem('payments', JSON.stringify(payments));
        }

        // Update daily quote
        function updateDailyQuote() {
            const quote = motivationalQuotes[Math.floor(Math.random() * motivationalQuotes.length)];
            document.getElementById('dailyQuote').textContent = `"${quote}"`;
        }

        // Loan Management
        function showLoanModal() {
            updateLoanFields();
            document.getElementById('loanModal').classList.remove('hidden');
            document.getElementById('loanModal').classList.add('flex');
        }

        function hideLoanModal() {
            document.getElementById('loanModal').classList.add('hidden');
            clearLoanForm();
        }

        function updateLoanFields() {
            const loanType = document.getElementById('loanType').value;
            const fieldsDiv = document.getElementById('loanFields');
            
            let html = '';
            
            switch(loanType) {
                case 'emi':
                    html = `
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Principal Amount (‚Çπ)</label>
                            <input type="number" id="principal" class="w-// Continuing from where your code was cut off...

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Principal Amount (‚Çπ)</label>
                            <input type="number" id="principal" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary" placeholder="500000">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Interest Rate (%)</label>
                            <input type="number" id="interestRate" step="0.01" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary" placeholder="8.5">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Loan Tenure (Years)</label>
                            <input type="number" id="tenure" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary" placeholder="20">
                        </div>
                    `;
                    break;
                case 'fixed':
                    html = `
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Total Amount to Pay (‚Çπ)</label>
                            <input type="number" id="totalAmount" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary" placeholder="100000">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Monthly Payment (‚Çπ)</label>
                            <input type="number" id="monthlyPayment" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary" placeholder="5000">
                        </div>
                    `;
                    break;
                case 'interest_only':
                    html = `
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Principal Amount (‚Çπ)</label>
                            <input type="number" id="principal" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary" placeholder="500000">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Interest Rate (% per month)</label>
                            <input type="number" id="interestRate" step="0.01" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary" placeholder="1.5">
                        </div>
                    `;
                    break;
                case 'personal':
                    html = `
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Current Outstanding (‚Çπ)</label>
                            <input type="number" id="outstanding" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary" placeholder="50000">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Target Monthly Payment (‚Çπ)</label>
                            <input type="number" id="monthlyPayment" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary" placeholder="5000">
                        </div>
                    `;
                    break;
            }
            
            fieldsDiv.innerHTML = html;
        }

        function clearLoanForm() {
            document.getElementById('loanName').value = '';
            document.getElementById('loanType').value = 'emi';
            document.getElementById('paymentDate').value = '1';
            document.getElementById('autoPayment').checked = false;
            document.getElementById('loanFields').innerHTML = '';
        }

        function saveLoan() {
            const name = document.getElementById('loanName').value.trim();
            const type = document.getElementById('loanType').value;
            const paymentDate = parseInt(document.getElementById('paymentDate').value);
            const autoPayment = document.getElementById('autoPayment').checked;
            
            if (!name) {
                alert('Please enter a loan name');
                return;
            }
            
            const loan = {
                id: Date.now(),
                name,
                type,
                paymentDate,
                autoPayment,
                createdAt: new Date().toISOString(),
                totalPaid: 0
            };
            
            // Add type-specific fields
            switch(type) {
                case 'emi':
                    const principal = parseFloat(document.getElementById('principal').value);
                    const interestRate = parseFloat(document.getElementById('interestRate').value);
                    const tenure = parseFloat(document.getElementById('tenure').value);
                    
                    if (!principal || !interestRate || !tenure) {
                        alert('Please fill all EMI loan fields');
                        return;
                    }
                    
                    const monthlyRate = interestRate / 100 / 12;
                    const totalMonths = tenure * 12;
                    const emi = principal * monthlyRate * Math.pow(1 + monthlyRate, totalMonths) / (Math.pow(1 + monthlyRate, totalMonths) - 1);
                    
                    loan.principal = principal;
                    loan.interestRate = interestRate;
                    loan.tenure = tenure;
                    loan.monthlyPayment = Math.round(emi);
                    loan.totalAmount = Math.round(emi * totalMonths);
                    loan.remainingAmount = loan.totalAmount;
                    break;
                    
                case 'fixed':
                    const totalAmount = parseFloat(document.getElementById('totalAmount').value);
                    const monthlyPayment = parseFloat(document.getElementById('monthlyPayment').value);
                    
                    if (!totalAmount || !monthlyPayment) {
                        alert('Please fill all fixed loan fields');
                        return;
                    }
                    
                    loan.totalAmount = totalAmount;
                    loan.monthlyPayment = monthlyPayment;
                    loan.remainingAmount = totalAmount;
                    break;
                    
                case 'interest_only':
                    const principalIO = parseFloat(document.getElementById('principal').value);
                    const interestRateIO = parseFloat(document.getElementById('interestRate').value);
                    
                    if (!principalIO || !interestRateIO) {
                        alert('Please fill all interest-only loan fields');
                        return;
                    }
                    
                    loan.principal = principalIO;
                    loan.interestRate = interestRateIO;
                    loan.monthlyPayment = Math.round(principalIO * interestRateIO / 100);
                    loan.remainingAmount = principalIO;
                    break;
                    
                case 'personal':
                    const outstanding = parseFloat(document.getElementById('outstanding').value);
                    const monthlyPaymentPersonal = parseFloat(document.getElementById('monthlyPayment').value);
                    
                    if (!outstanding || !monthlyPaymentPersonal) {
                        alert('Please fill all personal loan fields');
                        return;
                    }
                    
                    loan.totalAmount = outstanding;
                    loan.monthlyPayment = monthlyPaymentPersonal;
                    loan.remainingAmount = outstanding;
                    break;
            }
            
            loans.push(loan);
            saveData();
            updateDashboard();
            updateLoanCards();
            updatePaymentOptions();
            hideLoanModal();
        }

        // Wishlist Management
        function showWishlistModal() {
            document.getElementById('wishlistModal').classList.remove('hidden');
            document.getElementById('wishlistModal').classList.add('flex');
        }

        function hideWishlistModal() {
            document.getElementById('wishlistModal').classList.add('hidden');
            clearWishlistForm();
        }

        function clearWishlistForm() {
            document.getElementById('goalName').value = '';
            document.getElementById('goalImage').value = '';
            document.getElementById('goalPrice').value = '';
            document.getElementById('savingFreq').value = 'monthly';
            document.getElementById('savingAmount').value = '';
        }

        function saveWishlist() {
            const name = document.getElementById('goalName').value.trim();
            const image = document.getElementById('goalImage').value.trim();
            const price = parseFloat(document.getElementById('goalPrice').value);
            const frequency = document.getElementById('savingFreq').value;
            const amount = parseFloat(document.getElementById('savingAmount').value);
            
            if (!name || !price || !amount) {
                alert('Please fill all required fields');
                return;
            }
            
            const item = {
                id: Date.now(),
                name,
                image: image || 'https://via.placeholder.com/300x200?text=Goal',
                price,
                frequency,
                amount,
                saved: 0,
                createdAt: new Date().toISOString()
            };
            
            wishlistItems.push(item);
            saveData();
            updateDashboard();
            updateWishlistCards();
            updatePaymentOptions();
            hideWishlistModal();
        }

        // Payment Management
        function showPaymentModal() {
            updatePaymentOptions();
            document.getElementById('paymentModal').classList.remove('hidden');
            document.getElementById('paymentModal').classList.add('flex');
        }

        function hidePaymentModal() {
            document.getElementById('paymentModal').classList.add('hidden');
            clearPaymentForm();
        }

        function clearPaymentForm() {
            document.getElementById('paymentLoan').value = '';
            document.getElementById('paymentAmount').value = '';
            document.getElementById('paymentNote').value = '';
        }

        function updatePaymentOptions() {
            const select = document.getElementById('paymentLoan');
            let html = '<option value="">Select...</option>';
            
            loans.forEach(loan => {
                html += `<option value="loan_${loan.id}">${loan.name} (Loan)</option>`;
            });
            
            wishlistItems.forEach(item => {
                html += `<option value="wishlist_${item.id}">${item.name} (Goal)</option>`;
            });
            
            select.innerHTML = html;
        }

        function savePayment() {
            const loanId = document.getElementById('paymentLoan').value;
            const amount = parseFloat(document.getElementById('paymentAmount').value);
            const date = document.getElementById('paymentDate2').value;
            const note = document.getElementById('paymentNote').value.trim();
            
            if (!loanId || !amount || !date) {
                alert('Please fill all required fields');
                return;
            }
            
            const payment = {
                id: Date.now(),
                targetId: loanId,
                amount,
                date,
                note,
                createdAt: new Date().toISOString()
            };
            
            // Update loan or wishlist item
            if (loanId.startsWith('loan_')) {
                const id = parseInt(loanId.replace('loan_', ''));
                const loan = loans.find(l => l.id === id);
                if (loan) {
                    loan.totalPaid = (loan.totalPaid || 0) + amount;
                    if (loan.type !== 'interest_only') {
                        loan.remainingAmount = Math.max(0, loan.remainingAmount - amount);
                    }
                }
            } else if (loanId.startsWith('wishlist_')) {
                const id = parseInt(loanId.replace('wishlist_', ''));
                const item = wishlistItems.find(i => i.id === id);
                if (item) {
                    item.saved = (item.saved || 0) + amount;
                }
            }
            
            payments.push(payment);
            saveData();
            updateDashboard();
            updateLoanCards();
            updateWishlistCards();
            hidePaymentModal();
        }

        // Dashboard Updates
        function updateDashboard() {
            // Calculate totals
            const totalDebt = loans.reduce((sum, loan) => sum + (loan.remainingAmount || 0), 0);
            const totalMonthlyPayment = loans.reduce((sum, loan) => sum + (loan.monthlyPayment || 0), 0);
            const totalSavings = wishlistItems.reduce((sum, item) => sum + (item.saved || 0), 0);
            
            // Update summary cards
            document.getElementById('totalDebt').textContent = `‚Çπ${totalDebt.toLocaleString('en-IN')}`;
            document.getElementById('totalMonthlyPayment').textContent = `‚Çπ${totalMonthlyPayment.toLocaleString('en-IN')}`;
            document.getElementById('totalSavings').textContent = `‚Çπ${totalSavings.toLocaleString('en-IN')}`;
            
            // Calculate next payment
            const today = new Date();
            const currentDate = today.getDate();
            let nextPaymentDate = '';
            
            loans.forEach(loan => {
                if (loan.paymentDate >= currentDate) {
                    const nextDate = new Date(today.getFullYear(), today.getMonth(), loan.paymentDate);
                    if (!nextPaymentDate || nextDate < new Date(nextPaymentDate)) {
                        nextPaymentDate = nextDate.toLocaleDateString('en-IN');
                    }
                } else {
                    const nextDate = new Date(today.getFullYear(), today.getMonth() + 1, loan.paymentDate);
                    if (!nextPaymentDate || nextDate < new Date(nextPaymentDate)) {
                        nextPaymentDate = nextDate.toLocaleDateString('en-IN');
                    }
                }
            });
            
            document.getElementById('nextPayment').textContent = nextPaymentDate || '-';
            
            // Update recent payments
            updateRecentPayments();
            updateUpcomingPayments();
            updateProgressOverview();
        }

        function updateRecentPayments() {
            const container = document.getElementById('recentPayments');
            const recentPayments = payments.slice(-5).reverse();
            
            if (recentPayments.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-4">No payments recorded yet</p>';
                return;
            }
            
            let html = '';
            recentPayments.forEach(payment => {
                const targetName = getTargetName(payment.targetId);
                html += `
                    <div class="flex justify-between items-center p-3 bg-gray-50 rounded-md">
                        <div>
                            <p class="font-medium text-gray-900">${targetName}</p>
                            <p class="text-sm text-gray-500">${new Date(payment.date).toLocaleDateString('en-IN')}</p>
                        </div>
                        <p class="font-semibold text-green-600">‚Çπ${payment.amount.toLocaleString('en-IN')}</p>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function updateUpcomingPayments() {
            const container = document.getElementById('upcomingPayments');
            const today = new Date();
            const currentDate = today.getDate();
            
            let upcomingPayments = [];
            
            loans.forEach(loan => {
                if (loan.remainingAmount > 0) {
                    let nextDate;
                    if (loan.paymentDate >= currentDate) {
                        nextDate = new Date(today.getFullYear(), today.getMonth(), loan.paymentDate);
                    } else {
                        nextDate = new Date(today.getFullYear(), today.getMonth() + 1, loan.paymentDate);
                    }
                    
                    upcomingPayments.push({
                        name: loan.name,
                        amount: loan.monthlyPayment,
                        date: nextDate
                    });
                }
            });
            
            upcomingPayments.sort((a, b) => a.date - b.date);
            
            if (upcomingPayments.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-4">No upcoming payments</p>';
                return;
            }
            
            let html = '';
            upcomingPayments.slice(0, 5).forEach(payment => {
                html += `
                    <div class="flex justify-between items-center p-3 bg-gray-50 rounded-md">
                        <div>
                            <p class="font-medium text-gray-900">${payment.name}</p>
                            <p class="text-sm text-gray-500">${payment.date.toLocaleDateString('en-IN')}</p>
                        </div>
                        <p class="font-semibold text-orange-600">‚Çπ${payment.amount.toLocaleString('en-IN')}</p>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function updateProgressOverview() {
            const container = document.getElementById('progressOverview');
            
            if (loans.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-8">Add loans to see progress tracking</p>';
                return;
            }
            
            let html = '';
            loans.forEach(loan => {
                const totalAmount = loan.totalAmount || loan.remainingAmount;
                const paidAmount = loan.totalPaid || 0;
                const progressPercent = totalAmount > 0 ? Math.min(100, (paidAmount / totalAmount) * 100) : 0;
                
                html += `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-2">
                            <h4 class="font-medium text-gray-900">${loan.name}</h4>
                            <span class="text-sm text-gray-500">${progressPercent.toFixed(1)}%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-3">
                            <div class="progress-bar bg-blue-600 h-3 rounded-full" style="width: ${progressPercent}%"></div>
                        </div>
                        <div class="flex justify-between mt-1 text-sm text-gray-600">
                            <span>Paid: ‚Çπ${paidAmount.toLocaleString('en-IN')}</span>
                            <span>Remaining: ‚Çπ${(loan.remainingAmount || 0).toLocaleString('en-IN')}</span>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function updateLoanCards() {
            const container = document.getElementById('loanCards');
            
            if (loans.length === 0) {
                container.innerHTML = '<div class="col-span-full text-center py-8 text-gray-500">No loans added yet. Click "Add New Loan" to get started.</div>';
                return;
            }
            
            let html = '';
            loans.forEach(loan => {
                const progressPercent = loan.totalAmount > 0 ? Math.min(100, ((loan.totalPaid || 0) / loan.totalAmount) * 100) : 0;
                
                html += `
                    <div class="loan-card bg-white rounded-lg shadow-lg p-6 fade-in">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="text-lg font-semibold text-gray-900">${loan.name}</h3>
                            <span class="px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800">${loan.type.replace('_', ' ').toUpperCase()}</span>
                        </div>
                        
                        <div class="space-y-3 mb-4">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Monthly Payment:</span>
                                <span class="font-semibold">‚Çπ${(loan.monthlyPayment || 0).toLocaleString('en-IN')}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Remaining:</span>
                                <span class="font-semibold text-red-600">‚Çπ${(loan.remainingAmount || 0).toLocaleString('en-IN')}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Total Paid:</span>
                                <span class="font-semibold text-green-600">‚Çπ${(loan.totalPaid || 0).toLocaleString('en-IN')}</span>
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <div class="flex justify-between text-sm text-gray-600 mb-1">
                                <span>Progress</span>
                                <span>${progressPercent.toFixed(1)}%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div class="progress-bar bg-green-500 h-2 rounded-full" style="width: ${progressPercent}%"></div>
                            </div>
                        </div>
                        
                        <div class="flex space-x-2">
                            <button onclick="makePayment(${loan.id})" class="flex-1 bg-primary text-white px-4 py-2 rounded-md text-sm hover:bg-primary-dark">Make Payment</button>
                            <button onclick="deleteLoan(${loan.id})" class="px-4 py-2 text-red-600 border border-red-600 rounded-md text-sm hover:bg-red-50">Delete</button>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function updateWishlistCards() {
            const container = document.getElementById('wishlistCards');
            
            if (wishlistItems.length === 0) {
                container.innerHTML = '<div class="col-span-full text-center py-8 text-gray-500">No goals added yet. Click "Add New Goal" to get started.</div>';
                return;
            }
            
            let html = '';
            wishlistItems.forEach(item => {
                const progressPercent = item.price > 0 ? Math.min(100, ((item.saved || 0) / item.price) * 100) : 0;
                const remaining = item.price - (item.saved || 0);
                const isCompleted = progressPercent >= 100;
                
                html += `
                    <div class="bg-white rounded-lg shadow-lg overflow-hidden fade-in">
                        <img src="${item.image}" alt="${item.name}" class="w-full h-48 object-cover">
                        <div class="p-6">
                            <h3 class="text-lg font-semibold text-gray-900 mb-2">${item.name}</h3>
                            
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Target Price:</span>
                                    <span class="font-semibold">‚Çπ${item.price.toLocaleString('en-IN')}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Saved:</span>
                                    <span class="font-semibold text-green-600">‚Çπ${(item.saved || 0).toLocaleString('en-IN')}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Remaining:</span>
                                    <span class="font-semibold text-orange-600">‚Çπ${remaining.toLocaleString('en-IN')}</span>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <div class="flex justify-between text-sm text-gray-600 mb-1">
                                    <span>Progress</span>
                                    <span>${progressPercent.toFixed(1)}%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="progress-bar ${isCompleted ? 'bg-green-500' : 'bg-blue-500'} h-2 rounded-full" style="width: ${progressPercent}%"></div>
                                </div>
                            </div>
                            
                            ${isCompleted ? 
                                '<div class="text-center py-2 bg-green-100 text-green-800 rounded-md font-semibold">üéâ Goal Achieved!</div>' :
                                `<div class="flex space-x-2">
                                    <button onclick="addSaving(${item.id})" class="flex-1 bg-green-600 text-white px-4 py-2 rounded-md text-sm hover:bg-green-700">Add Saving</button>
                                    <button onclick="deleteWishlist(${item.id})" class="px-4 py-2 text-red-600 border border-red-600 rounded-md text-sm hover:bg-red-50">Delete</button>
                                </div>`
                            }
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // Helper functions
        function getTargetName(targetId) {
            if (targetId.startsWith('loan_')) {
                const id = parseInt(targetId.replace('loan_', ''));
                const loan = loans.find(l => l.id === id);
                return loan ? loan.name : 'Unknown Loan';
            } else if (targetId.startsWith('wishlist_')) {
                const id = parseInt(targetId.replace('wishlist_', ''));
                const item = wishlistItems.find(i => i.id === id);
                return item ? item.name : 'Unknown Goal';
            }
            return 'Unknown';
        }

        function makePayment(loanId) {
            const loan = loans.find(l => l.id === loanId);
            if (loan) {
                document.getElementById('paymentLoan').value = `loan_${loanId}`;
                document.getElementById('paymentAmount').value = loan.monthlyPayment;
                showPaymentModal();
            }
        }

        function addSaving(itemId) {
            const item = wishlistItems.find(i => i.id === itemId);
            if (item) {
                document.getElementById('paymentLoan').value = `wishlist_${itemId}`;
                document.getElementById('paymentAmount').value = item.amount;
                showPaymentModal();
            }
        }

        function deleteLoan(loanId) {
            if (confirm('Are you sure you want to delete this loan?')) {
                loans = loans.filter(l => l.id !== loanId);
                payments = payments.filter(p => p.targetId !== `loan_${loanId}`);
                saveData();
                updateDashboard();
                updateLoanCards();
                updatePaymentOptions();
            }
        }

        function deleteWishlist(itemId) {
            if (confirm('Are you sure you want to delete this goal?')) {
                wishlistItems = wishlistItems.filter(i => i.id !== itemId);
                payments = payments.filter(p => p.targetId !== `wishlist_${itemId}`);
                saveData();
                updateDashboard();
                updateWishlistCards();
                updatePaymentOptions();
            }
        }
    </script>
</body>
</html>